!--------------------------------------------------
!- Saturday, May 20, 2017 4:37:29 PM
!- Import of : 
!- c:\src\zelch64\prg.multi.prg
!- Commodore 64
!--------------------------------------------------
8000 FORI=0TO9:POKE43+I,PEEK(721+I):NEXT
8010 HI=0:TX$="{clear}{down*2}{f1}Multi-File Transfer System":GOSUB210
8020 TX$="{down*2}U)pload, D)ownload, or Q)uit?{ct c}":GOSUB210
8030 GOSUB100:IFIN$="q"THENTX$="q":GOSUB210:GOTO8900
8040 IFIN$="u"THEN8500
8050 IFIN$<>"d"THEN8030
8055 TX$="d":GOSUB210
8060 TX$="{f1}{down}Type in files to download":GOSUB210
8070 TX$="one at a time. 'Q' quits, 'S' when ":GOSUB210:GOTO8080
8071 IFI$="q"THEN8900
8073 IFI$="$"THEN9100
8075 GOTO 8091
8080 TX$="you're ready, and '$' for a directory.":GOSUB210:I1=1
8090 TX$="{f1}Filename #"+STR$(I1)+":{ct c}":GOSUB210:GOSUB190:F$=I$:GOTO8071
8091 IFI$=""ORLEN(I$)>15THENTX$="{f1}Illegal Filename!":GOSUB210:GOTO8090
8092 IFI$="s"THEN8100
8093 TX$="{f1}P)rg {white}or{f1} S)eq?{ct c}":GOSUB210
8094 GOSUB100:IFIN$="p"THENTX$="p":GOSUB210:F$=F$+",p":GOTO8097
8095 IFIN$<>"s"THEN8094
8096 TX$="s":GOSUB210:F$=F$+",s"
8097 OPEN8,UV(CU),8,"0:"+CHR$(64+CU)+F$+",r":GET#8,A$
8098 IFST=0THENSYSZ,8:TT$(I1)=F$:I1=I1+1:GOTO8090
8099 SYSZ,8:TX$="{f1}File Not Found!":GOSUB210:GOTO8090
8100 TX$="{f1}Are your choices correct?{ct c}":GOSUB210
8101 GOSUB100:IFIN$="n"THENI1=1:TX$="n":GOSUB210:GOTO8060
8102 IFIN$<>"y"THEN8101
8103 TX$="y":GOSUB210
8110 TX$="{clear}{f1}{up}{down*2}Go to MULTI-RECEIVE!":GOSUB210:I=1:FORX=0TO4500:NEXTX
8120 FORX=0TO1000:NEXTX:PRINT#5,"{ct i*36}";
8125 X$=TT$(I):PRINT"{down}Multi-Sending:";
8130 PRINT#5,;:FORK=1TOLEN(X$):Y$=MID$(X$,K,1):PRINT#5,Y$;:PRINTY$;:PRINT#5,;
8140 FORX=1TO50:NEXTX:NEXTK:PRINT#5,CHR$(13):PRINT
8145 IFX$="D O N E!"THENFORX=0TO2500:NEXTX:GOTO8900
8150 GET#5,A$:IFPEEK(830)=1THEN1230
8151 IFA$=""THEN8150
8160 TY=1:IFRIGHT$(TT$(I),1)="s"THENTY=2
8170 FI$=X$:FH=1:HI=1:OPEN1,CU(UV),15:OPEN2,UV(CU),2,"0:"+CHR$(64+CU)+X$+",r"
8180 GOTO5600
8191 I=I+1:IFI=I1THENTT$(I)="D O N E!":PRINT#5,"{ct i*9}";:
8192 IFI=I1THENPRINT#5,;:PRINT#5,"{ct d*22}
8193 GOTO 8120
8500 TX$="u":GOSUB210:TX$="{clear}{down*2}{f1}Go To MULTI-SEND!":GOSUB210
8505 F$=""
8510 GET#5,A$:IFPEEK(830)=1THEN1230
8520 IFA$<>"{ct i}"THEN8510
8525 PRINT"{down}Multi-Recieving:";:
8530 GET#5,A$:IFA$=""ORA$="{ct i}"THEN8530
8535 IFPEEK(830)=1THEN1230
8540 IFA$=CHR$(13)THENPRINT:GOTO8600
8550 IFA$=CHR$(4)ORPEEK(830)=1THENFORX=1TO2500:NEXTX:GOTO8900
8560 F$=F$+A$:PRINTA$;:GOTO8530
8600 B$=RIGHT$(F$,2):C$=LEFT$(F$,LEN(F$)-2):IFLEN(F$)>17THENF$=LEFT$(C$,15)+B$
8605 FI$=CHR$(64+CU)+F$+",w":FH=1:GOTO5420
8900 I$="{pound}prg.udsec":GOTO88
9000 YU=0:IFHI=1THENHI=0:GOTO8191
9001 GOTO8505
9100 TX$="{clear}{down*2}{f1}BLKS {f1}FILENAME       {f1}FILETYPE":GOSUB210
9110 POKE253,64+CU:OPEN8,UV(CU),0,"$0:"+CHR$(64+CU)+"*":SYS38224:SYSZ,8:GOTO8090
